# 正则表达式快速上手指南

正则表达式（Regular Expression，简称 Regex）是一种强大的文本匹配工具，掌握它能让你在处理字符串时事半功倍。本文将带你快速上手正则表达式，并提供实用的记忆技巧。

## 1. 什么是正则表达式？

正则表达式是一种用来匹配字符串的模式，它使用特殊的语法来描述字符串的规则。想象它是一个"字符串的搜索公式"，能够精确地找到你想要的文本。

## 2. 基础语法速记

### 2.1 字符匹配

| 符号 | 含义               | 记忆技巧     | 示例                    |
| ---- | ------------------ | ------------ | ----------------------- |
| `.`  | 匹配任意字符       | 点代表"任何" | `a.c` 匹配 "abc", "a1c" |
| `\d` | 匹配数字           | **d**igit    | `\d+` 匹配 "123"        |
| `\w` | 匹配字母数字下划线 | **w**ord     | `\w+` 匹配 "hello_123"  |
| `\s` | 匹配空白字符       | **s**pace    | `\s+` 匹配空格、制表符  |

### 2.2 数量修饰符

| 符号    | 含义          | 记忆技巧           | 示例     | 匹配结果            |
| ------- | ------------- | ------------------ | -------- | ------------------- |
| `*`     | 0 次或多次    | 星号代表"无限"     | `a*`     | "", "a", "aaa"      |
| `+`     | 1 次或多次    | 加号代表"至少一次" | `a+`     | "a", "aaa"          |
| `?`     | 0 次或 1 次   | 问号代表"可选"     | `a?`     | "", "a"             |
| `{n}`   | 恰好 n 次     | 花括号代表"精确"   | `a{3}`   | "aaa"               |
| `{n,}`  | 至少 n 次     | n 次以上           | `a{2,}`  | "aa", "aaa", "aaaa" |
| `{n,m}` | n 到 m 次之间 | 范围指定           | `a{2,4}` | "aa", "aaa", "aaaa" |

### 2.3 位置锚点

| 符号 | 含义     | 记忆技巧         | 示例                        |
| ---- | -------- | ---------------- | --------------------------- |
| `^`  | 行首     | 帽子在"头上"     | `^hello` 匹配行首的 "hello" |
| `$`  | 行尾     | 美元符号在"末尾" | `world$` 匹配行尾的 "world" |
| `\b` | 单词边界 | **b**oundary     | `\bcat\b` 匹配独立的 "cat"  |

## 3. 字符类和分组

### 3.1 字符类

```regex
[abc]        # 匹配 a、b 或 c 中的任意一个
[a-z]        # 匹配任意小写字母
[A-Z]        # 匹配任意大写字母
[0-9]        # 匹配任意数字（等同于 \d）
[a-zA-Z]     # 匹配任意字母
[a-zA-Z0-9]  # 匹配任意字母或数字（等同于 \w，但不包括下划线）
```

### 3.2 否定字符类

```regex
[^abc]       # 匹配除了 a、b、c 之外的任意字符
[^0-9]       # 匹配任意非数字字符（等同于 \D）
[^a-zA-Z]    # 匹配任意非字母字符
```

### 3.3 否定字符类

```regex
[.]          # 在字符类中，点号失去特殊含义，就是普通的点
[\d\s]       # 匹配数字或空白字符
[\w-]        # 匹配字母数字下划线或连字符
```

### 3.4 基本分组

在正则表达式中，用 () 括起来的部分就是一个组，这被称为"捕获组"（capturing group）。分组可以用于提取匹配的内容，或者对匹配进行更复杂的操作。

```regex
(abc)        # 分组，捕获匹配的内容
(\d{4})      # 捕获4位数字
([a-z]+)     # 捕获一个或多个小写字母
```

### 3.5 非捕获分组

(?:...) 表示创建一个分组，但不会捕获匹配的内容。

```regex
(?:abc)      # 非捕获分组，不保存匹配结果
(?:\d{4})    # 非捕获4位数字分组
```

### 3.6 选择（或）

```regex
(cat|dog)    # 匹配 "cat" 或 "dog"
(red|green|blue)  # 匹配三种颜色中的任意一种
```

### 3.7 反向引用

在正则表达式中，当你使用括号 () 创建一个捕获组时，正则引擎会记住这个组匹配的内容。反向引用就是通过特殊语法（如 \1、\2 等）来引用这些之前捕获的内容。

```regex
(\w+)\s+\1   # 匹配重复的单词，如 "hello hello"
(\d{2})-(\d{2})-(\d{4})  # 匹配日期格式，可以引用各部分
```

## 4. 高级特性详解

### 4.1 贪婪与非贪婪匹配

#### 4.1.1 贪婪匹配（默认）

```javascript
const text = "<div>内容1</div><div>内容2</div>";
const greedy = text.match(/<div>.*<\/div>/)[0];
console.log(greedy); // "<div>内容1</div><div>内容2</div>"
```

#### 4.1.2 非贪婪匹配

```javascript
const text = "<div>内容1</div><div>内容2</div>";
const lazy = text.match(/<div>.*?<\/div>/g);
console.log(lazy); // ["<div>内容1</div>", "<div>内容2</div>"]
```

#### 4.1.3 非贪婪量词

| 贪婪    | 非贪婪   | 含义                  |
| ------- | -------- | --------------------- |
| `*`     | `*?`     | 0 次或多次（非贪婪）  |
| `+`     | `+?`     | 1 次或多次（非贪婪）  |
| `?`     | `??`     | 0 次或 1 次（非贪婪） |
| `{n,m}` | `{n,m}?` | n 到 m 次（非贪婪）   |

### 4.2 前瞻和后顾断言

#### 4.2.1 正向前瞻 `(?=...)`

```regex
\d+(?=元)    # 匹配后面跟着"元"的数字
# "100元" 中匹配 "100"
```

#### 4.2.2 负向前瞻 `(?!...)`

```regex
\d+(?!元)    # 匹配后面不跟着"元"的数字
# "100块" 中匹配 "100"
```

#### 4.2.3 正向后顾 `(?<=...)`

```regex
(?<=\$)\d+   # 匹配前面有"$"的数字
# "$100" 中匹配 "100"
```

#### 4.2.4 负向后顾 `(?<!...)`

```regex
(?<!\$)\d+   # 匹配前面没有"$"的数字
# "100元" 中匹配 "100"
```

### 3.3 修饰符（Flags）

| 修饰符 | 含义                    | 示例                             |
| ------ | ----------------------- | -------------------------------- |
| `i`    | 忽略大小写              | `/hello/i` 匹配 "Hello", "HELLO" |
| `g`    | 全局匹配                | `/\d+/g` 匹配所有数字            |
| `m`    | 多行模式                | `/^hello/m` 在多行中匹配行首     |
| `s`    | 单行模式（.匹配换行符） | `/a.b/s` 匹配 "a\nb"             |
| `u`    | Unicode 模式            | 支持 Unicode 字符                |
| `y`    | 粘性匹配                | 从 lastIndex 开始匹配            |

## 5. 实战练习

### 5.1 数据验证

#### 5.1.1 邮箱验证

```javascript
// 简单版本
const emailSimple = /^[\w.-]+@[\w.-]+\.[a-zA-Z]{2,}$/;

// 复杂版本
const emailComplex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

// 测试
console.log(emailSimple.test("user@example.com")); // true
console.log(emailSimple.test("invalid.email")); // false
```

#### 5.1.2 手机号验证

```javascript
// 中国手机号
const phoneChina = /^1[3-9]\d{9}$/;

// 国际手机号（带国家代码）
const phoneInternational = /^\+\d{1,3}\d{10,14}$/;

// 测试
console.log(phoneChina.test("13812345678")); // true
console.log(phoneChina.test("12812345678")); // false
```

#### 5.1.3 密码强度验证

```javascript
// 至少8位，包含大小写字母、数字和特殊字符
const strongPassword =
  /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;

// 测试
console.log(strongPassword.test("Password123!")); // true
console.log(strongPassword.test("password")); // false
```

### 5.2 文本处理

#### 5.2.1 提取信息

```javascript
// 提取URL
const text = "访问我们的网站 https://www.example.com 或 http://test.com";
const urls = text.match(/https?:\/\/[\w.-]+\.[a-zA-Z]{2,}(?:\/[\w.-]*)*\/?/g);
console.log(urls); // ["https://www.example.com", "http://test.com"]

// 提取日期
const dateText = "今天是2024-01-15，明天是2024-01-16";
const dates = dateText.match(/\d{4}-\d{2}-\d{2}/g);
console.log(dates); // ["2024-01-15", "2024-01-16"]
```

#### 5.2.2 格式化处理

```javascript
// 格式化手机号
const phone = "13812345678";
const formatted = phone.replace(/(\d{3})(\d{4})(\d{4})/, "$1-$2-$3");
console.log(formatted); // "138-1234-5678"

// 隐藏敏感信息
const idCard = "123456789012345678";
const masked = idCard.replace(/(\d{6})\d{8}(\d{4})/, "$1********$2");
console.log(masked); // "123456********5678"
```

## 6. 实用工具推荐

- **在线测试工具**：regex101.com、regexr.com
- **可视化工具**：regexper.com（将正则表达式转换为图形）

## 7. 总结

正则表达式的学习关键在于：

1. **理解核心概念**：字符匹配、数量修饰、位置锚点
2. **多练习实战**：从简单模式开始，逐步增加复杂度
3. **建立记忆体系**：使用联想和形象记忆法
4. **避免常见陷阱**：注意转义字符和贪婪匹配
5. **善用工具**：利用在线工具验证和调试

记住，正则表达式是一门实践性很强的技能，只有通过大量练习才能真正掌握。
